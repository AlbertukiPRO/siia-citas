<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/layouts/template.xhtml">

    <ui:define name="content">
        <b:container fluid="true">
            <b:panel title="Citas" largeScreen="8" collapsible="false">
                <b:container styleClass="panel-body" fluid="true">
                    <legend>Citas</legend>
                    <span class="separador"></span>
                    <b:form id="formid">
                        <b:row>
                            <b:column mediumScreen="9" smallScreen="12"></b:column>
                            <b:column mediumScreen="1" smallScreen="12">
                                <b:commandButton value="Nueva cita"
                                                 action="#{citabean.nuevaCita()}"
                                                 title="Nueva cita"
                                                 ajax="true"
                                                 tooltip="Formulario para agendar una cita"
                                                 styleClass="btn btn-default"></b:commandButton>
                            </b:column>
                            <b:column mediumScreen="1" smallScreen="12" >
                                <b:commandButton title="Buscar Citas"
                                                 value="Buscar Cita"
                                                 ajax="true"
                                                 icon="fa-search"
                                                 disabled="#{misictas.btnLookForCitas}"
                                                 action="#{misictas.UpdateValores(auth.strNombreUsuarioLogin,auth.strUsuario)}"
                                                 update="@form"
                                                 styleClass="btn btn-default">
                                </b:commandButton>
                            </b:column>
                        </b:row>
                        <!-- IMPLEMENTACION PARA UNA MOSTRAR CITAS -->
                        <b:row id="miscitas" rendered="#{misictas.renderMisCitas}">
                            <b:container>
                                <legend>Mis Citas</legend>
                                <b:container>
                                    <b:row>
                                        <b:column largeScreen="10" mediumScreen="10" smallScreen="10">
                                            <b:dataTable value="#{misictas.listMisCitas}" var="item">
                                                <b:dataTableColumn value="CI#{item.strIdCita}" label="ID"></b:dataTableColumn>
                                                <b:dataTableColumn value="#{item.strDescripcionCita}" label="Datos Cita"></b:dataTableColumn>
                                                <b:dataTableColumn value="#{item.area}" label="Area"></b:dataTableColumn>
                                                <b:dataTableColumn value="#{item.strNameTramite}" label="Tramite"></b:dataTableColumn>
                                                <b:dataTableColumn value="#{item.strRepuesta}" label="Retroalimentación"></b:dataTableColumn>
                                                <b:dataTableColumn value="#{item.strFechaReservada} a las #{item.strHoraReservada}" label="Fecha y Hora"></b:dataTableColumn>
                                                <b:dataTableColumn  value="#{item.strEstatus}" label="Estatus"></b:dataTableColumn>
                                                <b:dataTableColumn label="Comprobante">
                                                    <b:commandButton value=" " iconAwesome="file-pdf-o" styleClass="btn btn-default"></b:commandButton>
                                                </b:dataTableColumn>
                                                <b:dataTableColumn label="Cancelar" rendered="#{misictas.isCancelable(item.strEstatus)}">
                                                    <b:commandButton iconAwesome="trash-o"
                                                                      styleClass="btn btn-default"
                                                                      onclick="$('#modalCancelar').modal(); javascript:return false; "
                                                                      actionListener="#{misictas.SetModalCancelar(item.strNameTramite)}">
                                                    </b:commandButton>
                                                </b:dataTableColumn>
                                            </b:dataTable>
                                        </b:column>
                                    </b:row>
                                </b:container>
                            </b:container>
                        </b:row>
                        <!-- IMPLEMENTACION PARA UNA NUEVA CITA -->
                    </b:form>
                </b:container>
                <b:column mediumScreen="2" largeScreen="2" smallScreen="6">
                    <h:outputLabel value="Informacion: "></h:outputLabel>
                    <b:button onclick="showModalWellcome()" iconAwesome="info-circle"></b:button></b:column>
            </b:panel>
        </b:container>
        <b:modal id="modalCancelar" title="Cancelar Cita" styleClass="modalCancelar modal">
            <p>Esta a punto de cancelar su cita con el area de con el objetivo de  <h:outputText value="#{misictas.localTramite}"><span id="setlabeltramite"
            ></span></h:outputText> </p>
            <h:form>
                <b:inputText placeholder="Escribe aquí"   label="Ingrese el motivo de la cancelación" value="#{misictas.motivoCancelacion}"></b:inputText>
                <b:commandButton title="Cancelar cita" value="Cancelar mi cita" action="#{misictas.Cancelar()}" styleClass="btn btn-default">
                </b:commandButton>
            </h:form>
            <f:facet name="footer">
                <b:button value="Cancelar" dismiss="modal"></b:button>
            </f:facet>
        </b:modal>
        <b:modal id="modalWellcome" title="Bienvenido al modulo de citas" styleClass="modal">
            <b:well>
                <h3>Bienvenido al nuevo modulo de citas</h3>
                <p>
                    En este nuevo modulo podras agendar tus citas con las diferentes areas de la univerisad. <br/>
                    <h:outputText value="¿Como se usa?" style="font-weight: bold;"></h:outputText>
                </p>
                <b:carousel id="carrucelitems" startAnimation="false" showIndicators="true" wrap="false">
                    <b:carouselItem>
                        <h:graphicImage library="imagenes" name="citas/selectArea.png" alt="img areas"></h:graphicImage>
                        <b:carouselCaption>
                            <h5>Selecciona el area o departamento el en cual nesitas una cita</h5>
                        </b:carouselCaption>
                    </b:carouselItem>

                    <b:carouselItem>
                        <h:graphicImage library="imagenes" name="citas/selecTramite.png" alt="img areas"></h:graphicImage>
                        <b:carouselCaption>
                            <h5>Selecciona el tramite que vas a realizar</h5>
                        </b:carouselCaption>
                    </b:carouselItem>

                    <b:carouselItem>
                        <h:graphicImage library="imagenes" name="citas/calendar.png" alt="img areas"></h:graphicImage>
                        <b:carouselCaption>
                            <h5>Elige una fecha y da clik en comprobar disponibilidad</h5>
                        </b:carouselCaption>
                    </b:carouselItem>

                    <b:carouselItem>
                        <h:graphicImage library="imagenes" name="citas/selectHora.png" alt="img areas"></h:graphicImage>
                        <b:carouselCaption>
                            <h5>Elige un horario dentro de los disponibles si la lista esta vacias elige otra fecha</h5>
                        </b:carouselCaption>
                    </b:carouselItem>

                    <b:carouselItem>
                        <h:graphicImage library="imagenes" name="citas/resumencita.png" alt="img areas"></h:graphicImage>
                        <b:carouselCaption>
                            <h5>Esto es un resumen de tu cita comprueba que los datos son correctos antes de agendar</h5>
                        </b:carouselCaption>
                    </b:carouselItem>
                </b:carousel>
            </b:well>

            <f:facet name="footer">
                <b:button value="Lo tengo!" look="btn btn-default" dismiss="modal" />
            </f:facet>
        </b:modal>
        <script>
            const showModalWellcome = () => $('#modalWellcome').modal();

            function loger(data) {
                console.log(data);
            }
        </script>
    </ui:define>
</ui:composition>