<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/layouts/template.xhtml">

    <ui:define name="content">
        <b:container fluid="true">
            <b:panel title="Citas" largeScreen="6" collapsible="false">
                <b:container styleClass="panel-body">
                    <legend>Citas</legend>
                    <b:form>
                        <!--
                        Uno es el listener y otro es el action:
                        -->
                        <b:commandButton value="Nueva cita"
                                         action="#{citabean.renderDataAlumno()}"
                                         styleClass="btn btn-default">
                        </b:commandButton>
                        <br/>
                        <b:formGroup>
                            <!--               COMBO DE AREAS             -->
                            <b:selectOneMenu value="#{citabean.strCurrentArea}"
                                             colMd="6" colLg="6"
                                             id="comboAreas"
                                             renderLabel="Lista de areas"
                                             label="Seleccione una Area"
                                             labelColLg="12"
                                             rendered="#{citabean.hasDataAreas}"
                                             ajax="true"
                                             update="@form"
                                             process="@this">

                                <f:selectItem itemLabel="Seleccione una area" value="none" itemValue="none"/>
                                <f:selectItems value="#{citabean.returnAreasList()}"/>

                                <f:ajax
                                        event="change"
                                        execute="@this"
                                        listener="#{citabean.listenerPostAreas}">
                                </f:ajax>
                            </b:selectOneMenu>
                        </b:formGroup>
                        <b:formGroup>
                            <!--               COMBO DE TRAMITES             -->
                            <b:selectOneMenu value="#{citabean.strCurrentTramite}"
                                             colMd="6" colLg="6"
                                             rendered="#{citabean.hasDataTramites}"
                                             id="selectTramite"
                                             label="Seleccione el tramite"
                                             labelColLg="12"
                                             ajax="true"
                                             process="@this">

                                <f:selectItem itemLabel="Seleccione un tramite" value="none" itemValue="none"/>
                                <f:selectItems value="#{citabean.returnTramitesList()}"/>

                                <f:ajax
                                        event="change"
                                        execute="@this"
                                        listener="#{citabean.listenerPostTramites}">
                                </f:ajax>
                            </b:selectOneMenu>
                        </b:formGroup>
                        <b:formGroup>
                            <!--               DATE PICKER FECHAS             -->
                            <b:dateTimePicker
                                    id="Fechas"
                                    format="MM/DD/YYYY"
                                    colMd="6" colLg="6"
                                    rendered="#{citabean.hasDataTramites}"
                                    week-days-disabled='6,0'
                                    weekDaysDisabled="0,5"
                                    mediumScreen="6" labelMediumScreen="2"
                                    ajax="true"
                                    value="#{citabean.strCurrentCalendar}"
                                    showTime="false"
                                    disabledDates="#{citabean.strFechasDisableCalendar}"
                                    label="Seleccione la fecha de su cita"
                                    labelColMd="12" labelColLg="12">

                                <f:ajax event="click" execute="@this"
                                        listener="#{citabean.ComprobarHorario()}"></f:ajax>
                            </b:dateTimePicker>
                            <b:commandButton rendered="#{citabean.hasDataAreas}" value="Comprobar disponibilidad"
                                             styleClass="btn btn-default"></b:commandButton>
                            <!--                            TODO: Implementar los campos restantes.
-->
                        </b:formGroup>
                    </b:form>
                </b:container>
            </b:panel>
        </b:container>
    </ui:define>
</ui:composition>